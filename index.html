
<!doctype html>
\n
<html lang="en">
\n
<head>
    \n
    <meta charset="utf-8" />\n
    <meta name="viewport" content="width=device-width,initial-scale=1" />\n
    <meta name="theme-color" content="#764ba2" />\n
    <meta name="description" content="Floky - Challenge friends daily with 30-second videos. Transform routines through fun social challenges. Install on any mobile device!" />\n
    <meta name="apple-mobile-web-app-capable" content="yes">\n
    <meta name="apple-mobile-web-app-status-bar-style" content="default">\n
    <meta name="apple-mobile-web-app-title" content="Floky">\n
    <meta name="mobile-web-app-capable" content="yes">\n
    <meta name="application-name" content="Floky">\n
    <link rel="manifest" href="/manifest.json">\n
    <title>Floky - Challenge Friends Daily</title>\n
    <style>
        \n * {
            \n margin: 0;
            \n padding: 0;
            \n box-sizing: border-box;
            \n
        }

        \n \n body {
            \n font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', \'Roboto\', sans-serif;
            \n background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            \n min-height: 100vh;
            \n color: white;
            \n overflow-x: hidden;
            \n
        }

        \n \n .container {
            \n max-width: 400px;
            \n margin: 0 auto;
            \n padding: 20px;
            \n min-height: 100vh;
            \n display: flex;
            \n flex-direction: column;
            \n
        }

        \n \n .header {
            \n text-align: center;
            \n padding: 40px 0;
            \n
        }

        \n \n .logo {
            \n font-size: 48px;
            \n font-weight: bold;
            \n margin-bottom: 10px;
            \n text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            \n
        }

        \n \n .tagline {
            \n font-size: 18px;
            \n opacity: 0.9;
            \n margin-bottom: 40px;
            \n
        }

        \n \n .main-content {
            \n flex: 1;
            \n display: flex;
            \n flex-direction: column;
            \n gap: 20px;
            \n
        }

        \n \n .screen {
            \n display: none;
            \n
        }

            \n \n .screen.active {
                \n display: flex;
                \n flex-direction: column;
                \n gap: 20px;
                \n
            }

        \n \n .feature-card {
            \n background: rgba(255, 255, 255, 0.1);
            \n backdrop-filter: blur(10px);
            \n border-radius: 16px;
            \n padding: 24px;
            \n border: 1px solid rgba(255, 255, 255, 0.2);
            \n
        }

        \n \n .feature-icon {
            \n font-size: 32px;
            \n margin-bottom: 12px;
            \n
        }

        \n \n .feature-title {
            \n font-size: 20px;
            \n font-weight: 600;
            \n margin-bottom: 8px;
            \n
        }

        \n \n .feature-desc {
            \n font-size: 14px;
            \n opacity: 0.8;
            \n line-height: 1.4;
            \n
        }

        \n \n .auth-form {
            \n background: rgba(255, 255, 255, 0.1);
            \n backdrop-filter: blur(10px);
            \n border-radius: 16px;
            \n padding: 24px;
            \n border: 1px solid rgba(255, 255, 255, 0.2);
            \n
        }

        \n \n .form-group {
            \n margin-bottom: 20px;
            \n
        }

            \n \n .form-group label {
                \n display: block;
                \n margin-bottom: 8px;
                \n font-weight: 600;
                \n
            }

        \n \n .form-input {
            \n width: 100%;
            \n padding: 12px 16px;
            \n border: 2px solid rgba(255, 255, 255, 0.3);
            \n border-radius: 8px;
            \n background: rgba(255, 255, 255, 0.1);
            \n color: white;
            \n font-size: 16px;
            \n
        }

            \n \n .form-input::placeholder {
                \n color: rgba(255, 255, 255, 0.7);
                \n
            }

            \n \n .form-input:focus {
                \n outline: none;
                \n border-color: rgba(255, 255, 255, 0.8);
                \n background: rgba(255, 255, 255, 0.2);
                \n
            }

        \n \n .btn {
            \n width: 100%;
            \n padding: 16px;
            \n border: none;
            \n border-radius: 12px;
            \n font-size: 16px;
            \n font-weight: 600;
            \n cursor: pointer;
            \n transition: all 0.3s ease;
            \n margin-bottom: 12px;
            \n
        }

        \n \n .btn-primary {
            \n background: white;
            \n color: #764ba2;
            \n
        }

            \n \n .btn-primary:hover {
                \n transform: translateY(-2px);
                \n box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                \n
            }

        \n \n .btn-secondary {
            \n background: rgba(255, 255, 255, 0.2);
            \n color: white;
            \n border: 1px solid rgba(255, 255, 255, 0.3);
            \n
        }

            \n \n .btn-secondary:hover {
                \n background: rgba(255, 255, 255, 0.3);
                \n
            }

        \n \n .app-status {
            \n text-align: center;
            \n padding: 20px;
            \n background: rgba(255, 255, 255, 0.1);
            \n border-radius: 12px;
            \n margin-top: 20px;
            \n
        }

        \n \n .status {
            \n font-size: 14px;
            \n opacity: 0.7;
            \n margin-top: 10px;
            \n
        }

        \n \n .installed-status {
            \n background: rgba(16, 185, 129, 0.2);
            \n border: 1px solid rgba(16, 185, 129, 0.3);
            \n
        }

        \n \n .browser-status {
            \n background: rgba(245, 158, 11, 0.2);
            \n border: 1px solid rgba(245, 158, 11, 0.3);
            \n
        }

        \n \n .dashboard-cards {
            \n display: grid;
            \n grid-template-columns: repeat(2, 1fr);
            \n gap: 16px;
            \n margin-bottom: 20px;
            \n
        }

        \n \n .stat-card {
            \n background: rgba(255, 255, 255, 0.1);
            \n backdrop-filter: blur(10px);
            \n border-radius: 12px;
            \n padding: 20px;
            \n text-align: center;
            \n border: 1px solid rgba(255, 255, 255, 0.2);
            \n
        }

        \n \n .stat-icon {
            \n font-size: 24px;
            \n margin-bottom: 8px;
            \n
        }

        \n \n .stat-number {
            \n font-size: 20px;
            \n font-weight: bold;
            \n margin-bottom: 4px;
            \n
        }

        \n \n .stat-label {
            \n font-size: 12px;
            \n opacity: 0.8;
            \n
        }

        \n \n .nav-tabs {
            \n display: flex;
            \n background: rgba(255, 255, 255, 0.1);
            \n border-radius: 12px;
            \n padding: 4px;
            \n margin-bottom: 20px;
            \n
        }

        \n \n .nav-tab {
            \n flex: 1;
            \n padding: 12px;
            \n text-align: center;
            \n border-radius: 8px;
            \n cursor: pointer;
            \n transition: all 0.3s ease;
            \n font-weight: 600;
            \n
        }

            \n \n .nav-tab.active {
                \n background: white;
                \n color: #764ba2;
                \n
            }

        \n \n .error-message {
            \n background: rgba(239, 68, 68, 0.2);
            \n border: 1px solid rgba(239, 68, 68, 0.3);
            \n padding: 12px;
            \n border-radius: 8px;
            \n margin-bottom: 16px;
            \n text-align: center;
            \n
        }

        \n \n .success-message {
            \n background: rgba(16, 185, 129, 0.2);
            \n border: 1px solid rgba(16, 185, 129, 0.3);
            \n padding: 12px;
            \n border-radius: 8px;
            \n margin-bottom: 16px;
            \n text-align: center;
            \n
        }

        \n \n #pwa-install-banner {
            \n display: none;
            \n position: fixed;
            \n bottom: 20px;
            \n left: 20px;
            \n right: 20px;
            \n background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            \n color: white;
            \n padding: 20px;
            \n border-radius: 12px;
            \n text-align: center;
            \n z-index: 10000;
            \n box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            \n
        }

        \n \n .banner-button {
            \n background: white;
            \n color: #764ba2;
            \n border: none;
            \n padding: 10px 20px;
            \n border-radius: 20px;
            \n font-weight: 600;
            \n margin: 5px;
            \n cursor: pointer;
            \n
        }

            \n \n .banner-button.secondary {
                \n background: transparent;
                \n color: white;
                \n border: 1px solid white;
                \n
            }

        \n \n .debug-info {
            \n background: rgba(0, 0, 0, 0.3);
            \n border-radius: 8px;
            \n padding: 15px;
            \n margin-top: 20px;
            \n font-size: 12px;
            \n font-family: monospace;
            \n
        }

        \n \n .loading {
            \n display: flex;
            \n align-items: center;
            \n justify-content: center;
            \n gap: 8px;
            \n
        }

        \n \n .spinner {
            \n width: 20px;
            \n height: 20px;
            \n border: 2px solid rgba(255, 255, 255, 0.3);
            \n border-top: 2px solid white;
            \n border-radius: 50%;
            \n animation: spin 1s linear infinite;
            \n
        }

        \n \n @keyframes spin {
            \n 0%

        {
            transform: rotate(0deg);
        }

        \n 100% {
            transform: rotate(360deg);
        }

        \n
        }
        \n
    </style>\n
</head>\n
<body>
    \n    <div class="container">\n        <div class="header">\n            <div class="logo">üèÜ Floky</div>\n            <div class="tagline">Challenge Friends Daily</div>\n        </div>\n        \n        <!-- Landing Screen -->\n        <div id="landing-screen" class="screen active">\n            <div class="main-content">\n                <div class="feature-card">\n                    <div class="feature-icon">üìπ</div>\n                    <div class="feature-title">30-Second Videos</div>\n                    <div class="feature-desc">Share your daily progress with quick video updates</div>\n                </div>\n                \n                <div class="feature-card">\n                    <div class="feature-icon">üë•</div>\n                    <div class="feature-title">Social Challenges</div>\n                    <div class="feature-desc">Create and join challenges with friends worldwide</div>\n                </div>\n                \n                <div class="feature-card">\n                    <div class="feature-icon">üéØ</div>\n                    <div class="feature-title">Daily Motivation</div>\n                    <div class="feature-desc">Build consistent habits through gamification</div>\n                </div>\n                \n                <div class="feature-card">\n                    <div class="feature-icon">üèÖ</div>\n                    <div class="feature-title">Brag Points & Streaks</div>\n                    <div class="feature-desc">Earn rewards and maintain daily streaks</div>\n                </div>\n            </div>\n            \n            <div class="install-section">\n                <button class="btn btn-primary" id="get-started-btn">\n                    üöÄ Get Started\n                </button>\n                <div class="app-status" id="app-status">\n                    <div style="font-size: 16px; font-weight: 600;" id="status-title">üîç Checking app status...</div>\n                    <div class="status" id="status-text">Please wait...</div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Auth Screen -->\n        <div id="auth-screen" class="screen">\n            <div class="nav-tabs">\n                <div class="nav-tab active" id="login-tab">Login</div>\n                <div class="nav-tab" id="signup-tab">Sign Up</div>\n            </div>\n            \n            <!-- Login Form -->\n            <div id="login-form" class="auth-form">\n                <div id="login-error" class="error-message" style="display: none;"></div>\n                <div class="form-group">\n                    <label for="login-email">Email</label>\n                    <input type="email" id="login-email" class="form-input" placeholder="Enter your email" required>\n                </div>\n                <div class="form-group">\n                    <label for="login-password">Password</label>\n                    <input type="password" id="login-password" class="form-input" placeholder="Enter your password" required>\n                </div>\n                <button class="btn btn-primary" id="login-btn">\n                    <span class="btn-text">Login</span>\n                    <span class="loading" style="display: none;">\n                        <span class="spinner"></span>\n                        Logging in...\n                    </span>\n                </button>\n            </div>\n            \n            <!-- Signup Form -->\n            <div id="signup-form" class="auth-form" style="display: none;">\n                <div id="signup-error" class="error-message" style="display: none;"></div>\n                <div id="signup-success" class="success-message" style="display: none;"></div>\n                <div class="form-group">\n                    <label for="signup-username">Username</label>\n                    <input type="text" id="signup-username" class="form-input" placeholder="Choose a username" required>\n                </div>\n                <div class="form-group">\n                    <label for="signup-email">Email</label>\n                    <input type="email" id="signup-email" class="form-input" placeholder="Enter your email" required>\n                </div>\n                <div class="form-group">\n                    <label for="signup-password">Password</label>\n                    <input type="password" id="signup-password" class="form-input" placeholder="Create a password" required>\n                </div>\n                <div class="form-group">\n                    <label for="signup-confirm">Confirm Password</label>\n                    <input type="password" id="signup-confirm" class="form-input" placeholder="Confirm your password" required>\n                </div>\n                <button class="btn btn-primary" id="signup-btn">\n                    <span class="btn-text">Create Account</span>\n                    <span class="loading" style="display: none;">\n                        <span class="spinner"></span>\n                        Creating...\n                    </span>\n                </button>\n            </div>\n            \n            <button class="btn btn-secondary" id="back-to-landing">Back to Home</button>\n        </div>\n        \n        <!-- Dashboard Screen -->\n        <div id="dashboard-screen" class="screen">\n            <div class="dashboard-cards">\n                <div class="stat-card">\n                    <div class="stat-icon">üèÜ</div>\n                    <div class="stat-number">150</div>\n                    <div class="stat-label">Brag Points</div>\n                </div>\n                <div class="stat-card">\n                    <div class="stat-icon">üî•</div>\n                    <div class="stat-number">7</div>\n                    <div class="stat-label">Day Streak</div>\n                </div>\n                <div class="stat-card">\n                    <div class="stat-icon">üí™</div>\n                    <div class="stat-number">3</div>\n                    <div class="stat-label">Active Challenges</div>\n                </div>\n                <div class="stat-card">\n                    <div class="stat-icon">üìπ</div>\n                    <div class="stat-number">12</div>\n                    <div class="stat-label">Videos This Week</div>\n                </div>\n            </div>\n            \n            <div class="feature-card">\n                <div class="feature-title">üéØ Today\'s Challenge</div>\n                <div class="feature-desc">Record a 30-second video of your morning workout routine!</div>\n                <button class="btn btn-primary" style="margin-top: 16px;">\n                    üìπ Record Video\n                </button>\n            </div>\n            \n            <button class="btn btn-secondary" id="logout-btn">Logout</button>\n        </div>\n        \n        <div class="debug-info" id="debug-info">\n            <div><strong>Debug Info:</strong></div>\n            <div id="debug-content">Loading...</div>\n        </div>\n    </div>\n    \n    <div id="pwa-install-banner">\n        <div style="font-weight: 700; margin-bottom: 10px;">üì± Install Floky App</div>\n        <div style="font-size: 14px; margin-bottom: 15px;">Add to your home screen for the best experience!</div>\n        <button class="banner-button" id="install-button">Install</button>\n        <button class="banner-button secondary" id="dismiss-button">Later</button>\n    </div>\n\n
    <script>\n        let deferredPrompt; \n        let currentUser = null; \n        \n        // Check if app is running as installed PWA\n        function isRunningStandalone() {\n            // Multiple detection methods for better accuracy\n            const standalone = window.matchMedia(\'(display-mode: standalone)\').matches;\n            const fullscreen = window.matchMedia(\'(display-mode: fullscreen)\').matches;\n            const minimalUi = window.matchMedia(\'(display-mode: minimal-ui)\').matches;\n            const navigatorStandalone = window.navigator.standalone === true;\n            const androidApp = document.referrer.includes(\'android-app://\');\n            \n            return standalone || fullscreen || minimalUi || navigatorStandalone || androidApp;\n        }\n        \n        // Update app status display\n        function updateAppStatus() {\n            const statusDiv = document.getElementById(\'app-status\');\n            const statusTitle = document.getElementById(\'status-title\');\n            const statusText = document.getElementById(\'status-text\');\n            const installBanner = document.getElementById(\'pwa-install-banner\');\n            \n            if (isRunningStandalone()) {\n                // App is installed and running standalone\n                statusDiv.className = \'app-status installed-status\';\n                statusTitle.innerHTML = \'‚úÖ App Installed Successfully!\';\n                statusText.innerHTML = \'Floky is running as a native app\';\n                if (installBanner) installBanner.style.display = \'none\';\n            } else {\n                // App is running in browser\n                statusDiv.className = \'app-status browser-status\';\n                statusTitle.innerHTML = \'üåê Running in Browser\';\n                statusText.innerHTML = \'Install for better experience\';\n            }\n        }\n        \n        // Screen navigation\n        function showScreen(screenId) {\n            document.querySelectorAll(\'.screen\').forEach(screen => {\n                screen.classList.remove(\'active\');\n            });\n            document.getElementById(screenId).classList.add(\'active\');\n        }\n        \n        // Update debug information\n        function updateDebugInfo() {\n            const debugContent = document.getElementById(\'debug-content\');\n            const info = [\n                `Standalone: ${isRunningStandalone()}`,\n                `Display Mode Standalone: ${window.matchMedia(\'(display-mode: standalone)\').matches}`,\n                `Navigator Standalone: ${window.navigator.standalone}`,\n                `Referrer: ${document.referrer}`,\n                `User Agent: ${navigator.userAgent.substring(0, 50)}...`,\n                `SW Support: ${\'serviceWorker\' in navigator}`,\n                `Install Prompt: ${deferredPrompt ? \'Available\' : \'Not Available\'}`,\n                `Current User: ${currentUser ? currentUser.username : \'Not logged in\'}`\n            ];\n            debugContent.innerHTML = info.map(line => `<div>${line}</div>`).join(\'\');\n        }\n        \n        // Simulate user storage\n        function saveUser(userData) {\n            localStorage.setItem(\'floky_user\', JSON.stringify(userData));\n            currentUser = userData;\n        }\n        \n        function loadUser() {\n            const saved = localStorage.getItem(\'floky_user\');\n            if (saved) {\n                currentUser = JSON.parse(saved);\n                return true;\n            }\n            return false;\n        }\n        \n        function clearUser() {\n            localStorage.removeItem(\'floky_user\');\n            currentUser = null;\n        }\n        \n        // Show error message\n        function showError(elementId, message) {\n            const errorEl = document.getElementById(elementId);\n            errorEl.textContent = message;\n            errorEl.style.display = \'block\';\n            setTimeout(() => {\n                errorEl.style.display = \'none\';\n            }, 5000);\n        }\n        \n        // Show success message\n        function showSuccess(elementId, message) {\n            const successEl = document.getElementById(elementId);\n            successEl.textContent = message;\n            successEl.style.display = \'block\';\n            setTimeout(() => {\n                successEl.style.display = \'none\';\n            }, 3000);\n        }\n        \n        // Toggle loading state\n        function setLoading(buttonId, isLoading) {\n            const btn = document.getElementById(buttonId);\n            const text = btn.querySelector(\'.btn-text\');\n            const loading = btn.querySelector(\'.loading\');\n            \n            if (isLoading) {\n                text.style.display = \'none\';\n                loading.style.display = \'flex\';\n                btn.disabled = true;\n            } else {\n                text.style.display = \'block\';\n                loading.style.display = \'none\';\n                btn.disabled = false;\n            }\n        }\n        \n        // Initialize app\n        function initApp() {\n            updateAppStatus();\n            updateDebugInfo();\n            \n            // Check if user is already logged in\n            if (loadUser()) {\n                showScreen(\'dashboard-screen\');\n            }\n        }\n        \n        // Event listeners\n        document.getElementById(\'get-started-btn\').addEventListener(\'click\', () => {\n            showScreen(\'auth-screen\');\n        });\n        \n        document.getElementById(\'back-to-landing\').addEventListener(\'click\', () => {\n            showScreen(\'landing-screen\');\n        });\n        \n        // Auth tab switching\n        document.getElementById(\'login-tab\').addEventListener(\'click\', () => {\n            document.getElementById(\'login-tab\').classList.add(\'active\');\n            document.getElementById(\'signup-tab\').classList.remove(\'active\');\n            document.getElementById(\'login-form\').style.display = \'block\';\n            document.getElementById(\'signup-form\').style.display = \'none\';\n        });\n        \n        document.getElementById(\'signup-tab\').addEventListener(\'click\', () => {\n            document.getElementById(\'signup-tab\').classList.add(\'active\');\n            document.getElementById(\'login-tab\').classList.remove(\'active\');\n            document.getElementById(\'signup-form\').style.display = \'block\';\n            document.getElementById(\'login-form\').style.display = \'none\';\n        });\n        \n        // Login functionality\n        document.getElementById(\'login-btn\').addEventListener(\'click\', async () => {\n            const email = document.getElementById(\'login-email\').value;\n            const password = document.getElementById(\'login-password\').value;\n            \n            if (!email || !password) {\n                showError(\'login-error\', \'Please fill in all fields\');\n                return;\n            }\n            \n            setLoading(\'login-btn\', true);\n            \n            // Simulate API call\n            setTimeout(() => {\n                setLoading(\'login-btn\', false);\n                \n                // Check if user exists in localStorage (demo)\n                const savedUsers = JSON.parse(localStorage.getItem(\'floky_users\') || \'[]\');\n                const user = savedUsers.find(u => u.email === email && u.password === password);\n                \n                if (user) {\n                    saveUser(user);\n                    showScreen(\'dashboard-screen\');\n                    updateDebugInfo();\n                } else {\n                    showError(\'login-error\', \'Invalid email or password\');\n                }\n            }, 2000);\n        });\n        \n        // Signup functionality\n        document.getElementById(\'signup-btn\').addEventListener(\'click\', async () => {\n            const username = document.getElementById(\'signup-username\').value;\n            const email = document.getElementById(\'signup-email\').value;\n            const password = document.getElementById(\'signup-password\').value;\n            const confirm = document.getElementById(\'signup-confirm\').value;\n            \n            if (!username || !email || !password || !confirm) {\n                showError(\'signup-error\', \'Please fill in all fields\');\n                return;\n            }\n            \n            if (password !== confirm) {\n                showError(\'signup-error\', \'Passwords do not match\');\n                return;\n            }\n            \n            if (password.length < 6) {\n                showError(\'signup-error\', \'Password must be at least 6 characters\');\n                return;\n            }\n            \n            setLoading(\'signup-btn\', true);\n            \n            // Simulate API call\n            setTimeout(() => {\n                setLoading(\'signup-btn\', false);\n                \n                // Save user to localStorage (demo)\n                const savedUsers = JSON.parse(localStorage.getItem(\'floky_users\') || \'[]\');\n                \n                // Check if user already exists\n                if (savedUsers.find(u => u.email === email)) {\n                    showError(\'signup-error\', \'An account with this email already exists\');\n                    return;\n                }\n                \n                const newUser = { username, email, password, joinDate: new Date().toISOString() };\n                savedUsers.push(newUser);\n                localStorage.setItem(\'floky_users\', JSON.stringify(savedUsers));\n                \n                showSuccess(\'signup-success\', \'Account created successfully! You can now login.\');\n                \n                // Clear form\n                document.getElementById(\'signup-username\').value = \'\';\n                document.getElementById(\'signup-email\').value = \'\';\n                document.getElementById(\'signup-password\').value = \'\';\n                document.getElementById(\'signup-confirm\').value = \'\';\n                \n                // Switch to login tab after delay\n                setTimeout(() => {\n                    document.getElementById(\'login-tab\').click();\n                }, 2000);\n            }, 2000);\n        });\n        \n        // Logout functionality\n        document.getElementById(\'logout-btn\').addEventListener(\'click\', () => {\n            clearUser();\n            showScreen(\'landing-screen\');\n            updateDebugInfo();\n        });\n        \n        // PWA installation handlers\n        const installBanner = document.getElementById(\'pwa-install-banner\');\n        const installButton = document.getElementById(\'install-button\');\n        const dismissButton = document.getElementById(\'dismiss-button\');\n        \n        window.addEventListener(\'beforeinstallprompt\', (e) => {\n            e.preventDefault();\n            deferredPrompt = e;\n            \n            if (!isRunningStandalone()) {\n                installBanner.style.display = \'block\';\n            }\n            updateDebugInfo();\n        });\n        \n        function installApp() {\n            if (deferredPrompt) {\n                deferredPrompt.prompt();\n                deferredPrompt.userChoice.then((choiceResult) => {\n                    if (choiceResult.outcome === \'accepted\') {\n                        console.log(\'User accepted the install prompt\');\n                    }\n                    deferredPrompt = null;\n                    installBanner.style.display = \'none\';\n                    updateDebugInfo();\n                });\n            } else {\n                alert(\'To install Floky:\\\\n\\\\n1. Tap the share button in your browser\\\\n2. Select "Add to Home Screen"\\\\n3. Tap "Add" to install\');\n            }\n        }\n        \n        if (installButton) installButton.addEventListener(\'click\', installApp);\n        \n        if (dismissButton) {\n            dismissButton.addEventListener(\'click\', () => {\n                installBanner.style.display = \'none\';\n                localStorage.setItem(\'pwa-dismissed\', Date.now());\n            });\n        }\n        \n        // Check if previously dismissed (only for browser mode)\n        const dismissed = localStorage.getItem(\'pwa-dismissed\');\n        if (dismissed && (Date.now() - dismissed < 604800000) && !isRunningStandalone()) { // 7 days\n            installBanner.style.display = \'none\';\n        }\n        \n        // Register service worker\n        if (\'serviceWorker\' in navigator) {\n            window.addEventListener(\'load\', () => {\n                navigator.serviceWorker.register(\'/sw.js\')\n                    .then((registration) => {\n                        console.log(\'SW registered: \', registration);\n                        updateDebugInfo();\n                    })\n                    .catch((registrationError) => {\n                        console.log(\'SW registration failed: \', registrationError);\n                        updateDebugInfo();\n                    });\n            });\n        }\n        \n        // Initialize app when loaded\n        window.addEventListener(\'load\', () => {\n            initApp();\n            \n            setTimeout(() => {\n                console.log(\'Floky PWA loaded successfully\');\n                updateDebugInfo();\n            }, 1000);\n        });\n        \n        // Listen for display mode changes\n        window.matchMedia(\'(display-mode: standalone)\').addEventListener(\'change\', (e) => {\n            updateAppStatus();\n            updateDebugInfo();\n        });\n        \n        // Listen for app installation\n        window.addEventListener(\'appinstalled\', (e) => {\n            console.log(\'PWA was installed\');\n            updateAppStatus();\n            updateDebugInfo();\n        });\n</script>\n
</body>\n
</html>'
